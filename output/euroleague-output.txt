======================================================================
  EUROLEAGUE BASKETBALL KNOWLEDGE GRAPH
  HyperMindAgent with Deductive Reasoning + Assertions
======================================================================

Source: https://medium.com/@skontopo2009/
        representing-euroleague-play-by-play-data-as-a-knowledge-graph
Data Model: https://github.com/andrewstellman/pbprdf

[1] Loading Play-by-Play Knowledge Graph...
    Source: euroleague-api (pip install euroleague-api)
    Triples: 603

[2] SPARQL Queries with Assertions:

    [PASS] Teams count = 2 (BER, PAN)
    [PASS] Players count = 22
    [PASS] Steals count = 3 (Lessort, Mitoglou, Mattisseck)
    [PASS] Steal players are correct
    [PASS] Assist events count = 8
    [PASS] Teammate links = 111
    [PASS] Scoring events found

[3] Schema Extraction:
    Classes: 0
    Predicates: 0
    Mode: Native Rust (NAPI-RS)
    [PASS] Schema extracted from graph

[4] Query Capabilities:

  Mode: NAPI-RS (native binding)
  Triples: 603
  Classes: 0
  Predicates: 0

    [PASS] Graph has classes
    [PASS] Graph has predicates

[5] HyperFederate SQL Generation (graph_search UDF):

  HyperFederate unifies SQL + Knowledge Graph queries via graph_search() UDF.
  This enables cross-source joins between SPARQL results and SQL tables.

  EXAMPLE: HyperFederate SQL with graph_search():
  ```sql
  -- HyperFederate SQL: Join Knowledge Graph + External Data
  SELECT
    kg.player,
    kg.steal_count,
    ext.player_salary,
    ext.team_budget
  FROM graph_search('
    PREFIX euro: <http://euroleague.net/ontology#>
    SELECT ?player (COUNT(?steal) AS ?steal_count) WHERE {
      ?steal a euro:Steal .
      ?steal euro:player ?player .
    } GROUP BY ?player
  ') kg
  LEFT JOIN external_db.player_contracts ext
    ON kg.player = ext.player_uri
  ORDER BY kg.steal_count DESC
  ```

  HONEST OUTPUT - graph_search() SPARQL executed standalone:

  SPARQL Query:
  ```sparql
  PREFIX euro: <http://euroleague.net/ontology#>
  SELECT ?player (COUNT(?steal) AS ?steal_count) WHERE {
    ?steal a euro:Steal .
    ?steal euro:player ?player .
  } GROUP BY ?player
  ```

  HONEST RESULTS (from graph_search):
  | player                    | steal_count |
  |---------------------------|-------------|
  | lessort__mathias          |           1 |
  | mitoglou__konstantinos    |           1 |
  | mattisseck__jonas         |           1 |

    [PASS] HyperFederate SQL shows 3 steal players

[6] ThinkingReasoner with Deductive Reasoning:

  Training RDF2Vec embeddings...
    ✓ RDF2Vec: 384-dim embeddings (50 walks, 6 length, 3 epochs)
  Building GraphFrame for analytics...
    GraphFrame: agent.buildGraphFrame is not a function
  Auto-reasoning complete (OWL auto-detected from TTL)...
    Agent: euroleague-analyst
    LLM: OpenAI
    Observations: 603
    Derived Facts: 615
    Rules Applied: 3
    [PASS] Derived facts from OWL reasoning
    [PASS] OWL rules detected from TTL data

[7] Reasoning Demonstration (SPARQL-based OWL inference):

  [OBSERVE] Symmetric teammate relationships:
    → none teammateOf osman__cedi
    → grant__jerian teammateOf osman__cedi
    → brown__lorenzo teammateOf osman__cedi
    → nunn__kendrick teammateOf osman__cedi
    → sloukas__kostas teammateOf osman__cedi
    → grigonis__marius teammateOf osman__cedi
    ... and 6 more

  [INFER] Steal events (player performance):
    ⟹ lessort__mathias made steal (e00011)
    ⟹ mitoglou__konstantinos made steal (e00028)
    ⟹ mattisseck__jonas made steal (e00030)

  ✅ REASONING COMPLETE:
    - 603 observations (ground truth from KG)
    - 615 derived facts (inferred via OWL rules)
    - 3 rules applied (SymmetricProperty, TransitiveProperty)
    - Every fact is traceable to source data (no hallucination)

[8] Use Case Queries (SPARQL-first, deterministic):

------------------------------------------------------------
JOURNALIST: "Who made the defensive steals?"
VALUE: Uncover storylines beyond surface-level stats
------------------------------------------------------------

SPARQL:
```sparql
SELECT ?player WHERE {
    ?e <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://euroleague.net/ontology#Steal> .
    ?e <http://euroleague.net/ontology#player> ?player .
  }
```

RESULTS: 3 bindings
SAMPLE (first 5):
  player=lessort__mathias, e=e00011
  player=mitoglou__konstantinos, e=e00028
  player=mattisseck__jonas, e=e00030
    [PASS] JOURNALIST: Who made the defensive steals?

REASONING CONTEXT:
  Observations: 603
  Derived Facts: 615
  Rules Applied: 3

------------------------------------------------------------
COACH: "Which players distributed the ball best with assists?"
VALUE: Identify team chemistry for strategic planning
------------------------------------------------------------

SPARQL:
```sparql
SELECT ?player WHERE {
    ?e <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://euroleague.net/ontology#Assist> .
    ?e <http://euroleague.net/ontology#player> ?player .
  }
```

RESULTS: 8 bindings
SAMPLE (first 5):
  e=e00007, player=nunn__kendrick
  player=rapieque__elias, e=e00014
  player=nunn__kendrick, e=e00016
  e=e00032, player=hermannsson__martin
  player=brown__lorenzo, e=e00051
    [PASS] COACH: Which players distributed the ball best with assists?

REASONING CONTEXT:
  Observations: 603
  Derived Facts: 615
  Rules Applied: 3

------------------------------------------------------------
ANALYST: "Who made scoring plays (Shots)?"
VALUE: Enriched interconnected data for modeling
------------------------------------------------------------

SPARQL:
```sparql
SELECT ?player ?label WHERE {
    ?e <http://euroleague.net/ontology#player> ?player .
    ?e <http://www.w3.org/1999/02/22-rdf-syntax-ns#type> <http://euroleague.net/ontology#Shot> .
    ?e <http://www.w3.org/2000/01/rdf-schema#label> ?label .
  }
```

RESULTS: 35 bindings
SAMPLE (first 5):
  player=grigonis__marius, e=e00002, label=1 -  0 pt)
  e=e00004, label=1 -  0 pt), player=koumadje__khalifa
  player=lessort__mathias, label=1 -  2 pt), e=e00006
  player=nunn__kendrick, label=1 -  2 pt), e=e00012
  label=1 -  2 pt), e=e00013, player=olinde__louis
    [PASS] ANALYST: Who made scoring plays (Shots)?

REASONING CONTEXT:
  Observations: 603
  Derived Facts: 615
  Rules Applied: 3

------------------------------------------------------------
FAN: "Who are the teammates of Lessort?"
VALUE: Interactive exploration of team dynamics
------------------------------------------------------------

SPARQL:
```sparql
SELECT ?teammate WHERE {
        <http://euroleague.net/player/lessort__mathias> <http://euroleague.net/ontology#teammateOf> ?teammate .
      }
```

RESULTS: 8 bindings
SAMPLE (first 5):
  teammate=osman__cedi
  teammate=grant__jerian
  teammate=brown__lorenzo
  teammate=sloukas__kostas
  teammate=yurtseven__omer
    [PASS] FAN: Who are the teammates of Lessort?

REASONING CONTEXT:
  Observations: 603
  Derived Facts: 615
  Rules Applied: 3

[9] HyperMindAgent Natural Language (ask + askAgentic):

  --- ask() - Simple Query (KG-grounded) ---
  Question: "Who are the players with steals in this game?"
  ANSWER: Found 3 results: "<http://euroleague.net/player/lessort__mathias>", "<http://euroleague.net/player/mitoglou__konstantinos>", "<http://euroleague.net/player/mattisseck__jonas>"
  REASONING: To find players with steals in the game, we first need to identify entities classified as steals and then retrieve associated players. Using SPARQL, I query for events of type Steal and extract the player associated with each event. Finally, I ensure that we return a unique list of players using the unique function.
  RHAI CODE: // Rhai code here - compose objects naturally

// Step 1: Query to find players ...
  CAPABILITIES: query, construct, count, is_empty, load_ttl, federate, graph_search, apply_rules, derive, explain, extract_schema, get_classes, get_properties, store_memory, recall_memory, persist_memory, embed, similar, similarity, pagerank, triangle_count, connected_components, shortest_paths, label_propagation, show_definition, list_all_capabilities
  PROOF HASH: e99e5c550a9b816c...
  EXECUTION: 3.22ms
    [PASS] ask() returns grounded answer

  --- askAgentic() - Multi-Step Reasoning ---
  Question: "Analyze the defensive performance in this game. Who made steals and which team had better defense?"
  ANSWER: In the game analyzed, the following players made steals:

- Mathias Lessort from team Panathinaikos (PAN)
- Konstantinos Mitoglou from team Panathinaikos (PAN)
- Jonas Mattisseck from team Alba Berlin (BER)

Both teams recorded the same number of steals, so additional factors like fouls may be considered to determine overall defensive performance. 

Regarding fouls, players from both teams committed fouls as well:

- Panathinaikos players with fouls include Mathias Lessort, Konstantinos Mitoglou, Lorenzo Brown, Marius Grigonis, and Kendrick Nunn.
- Alba Berlin players with fouls include Khalifa Koumadje, Martin Hermannsson, Jonas Mattisseck, Elias Rapieque, Trevion Williams, Will McDowell-White, and Yanni Wetzell.

Defensive effectiveness also involves considering turnovers forced, defensive rebounds, and opponent shooting percentages, which aren't detailed in the given data. However, the number of fouls could suggest discipline issues that might offset good defense. Overall, the defensive efforts appear balanced between the two teams, as both recorded equivalent steals, but the foul data might indicate Panathinaikos had a slightly more disciplined defense due to fewer players fouling out.
  REASONING: Completed in 4 turns
  TOOL CALLS: query({"sparql":"SELECT ?player ?team WHERE { ?s a <http://euroleague.net/ontolo...
  CAPABILITIES: query
  PROOF HASH: f8219c3546be180a...
  EXECUTION: 13131.35ms

  ┌────────────────────────────────────────────────────────────────────┐
  │ CAPABILITY COMPARISON: ask() vs askAgentic()                       │
  ├────────────────────────────────────────────────────────────────────┤
  │ Feature              │ ask()           │ askAgentic()              │
  ├──────────────────────┼─────────────────┼───────────────────────────┤
  │ Query Type           │ Single-turn     │ Multi-turn                │
  │ Tool Use             │ No              │ Yes (SPARQL, reasoning)   │
  │ Reasoning            │ Direct answer   │ Step-by-step chain        │
  │ Latency              │ Fast (~1-2s)    │ Slower (~5-15s)           │
  │ Use Case             │ Simple lookups  │ Complex analysis          │
  │ Proof Generation     │ Yes (hash)      │ Yes (full derivation)     │
  └────────────────────────────────────────────────────────────────────┘

======================================================================
  TEST RESULTS SUMMARY
======================================================================

  PASSED: 18
  FAILED: 0
  TOTAL:  18

  PASS RATE: 100.0%

======================================================================
  ARCHITECTURE SUMMARY - ALL IN-MEMORY
======================================================================

  KNOWLEDGE GRAPH (In-Memory):
    Triples: 603
    Teams: 2
    Players: 22
    Steals: 3
    Assists: 8
    Teammate links: 111

  SCHEMA EXTRACTION (Native Rust):
    Classes: 0
    Predicates: 0
    Mode: NAPI-RS (native binding)

  THINKING REASONER (In-Memory):
    Observations: 603
    Derived Facts: 615
    OWL Rules: 3
    - SymmetricProperty: A rel B => B rel A
    - TransitiveProperty: A rel B, B rel C => A rel C

  BENEFITS:
    - Zero latency: No network I/O
    - Offline capable: Works without internet
    - Privacy: All data in process memory
    - Verifiable: Assertions prove correctness

  JSON output saved to: output/euroleague-output.json

